id: com.alientrap.nexuiz-classic
runtime: org.freedesktop.Platform
runtime-version: '25.08'
sdk: org.freedesktop.Sdk
command: nexuiz
finish-args:
  - --device=all
  - --socket=pulseaudio
  - --socket=wayland
  - --socket=fallback-x11
  - --share=ipc
  - --share=network
  - --persist=.nexuiz
modules:

  - name: nexuiz-data
    buildsystem: simple
    build-commands:
      - install -Dm644 /usr/share/games/nexuiz/data/data.pk3 -t /app/share/nexuiz/data
    sources:
      - type: archive
        url: https://ftp.debian.org/debian/pool/main/n/nexuiz-data/nexuiz-data_2.5.2-13_all.deb
        sha256: 0e67d441ad52e479e11f4b4d0cdea57bfb69840bc036f341aaccfaf0be1b97bb

  - name: nexuiz-textures
    buildsystem: simple
    build-commands:
      - install -Dm644 /usr/share/games/nexuiz/data/textures.pk3 -t /app/share/nexuiz/data
    sources:
      - type: archive
        url: https://ftp.debian.org/debian/pool/main/n/nexuiz-data/nexuiz-textures_2.5.2-13_all.deb
        sha256: ea275508dd494a5fe33cded2d41aee6a919952b9ce30b876df46bb64a9997837

  - name: nexuiz-music
    buildsystem: simple
    build-commands:
      - install -Dm644 /usr/share/games/nexuiz/data/music.pk3 -t /app/share/nexuiz/data
    sources:
      - type: archive
        url: https://ftp.debian.org/debian/pool/main/n/nexuiz-data/nexuiz-music_2.5.2-13_all.deb
        sha256: 9c319a7095ba4dbd7ce76945866dc08c14d02b70d84619cbbc3dd9769afcc229

  - name: darkplaces
    buildsystem: simple
    build-commands:
      - install -Dm755 /usr/games/darkplaces -t /app/bin
    sources:
      - type: archive
        url: https://deb.debian.org/debian/pool/main/d/darkplaces/darkplaces_0~20180908~beta1-7_amd64.deb
        sha256: 50392c235751ba703149946f1ed00179b4ebd0939dc5b087cf4841589fcfab48

  - name: launcher
    buildsystem: simple
    build-commands:
      - install -Dm755 nexuiz -t /app/bin
    sources:
      - type: file
        path: nexuiz

  - name: desktop-integration
    buildsystem: simple
    build-commands:
      - install -Dm644 com.alientrap.nexuiz-classic.metainfo.xml -t /app/share/metainfo
      - install -Dm644 com.alientrap.nexuiz-classic.desktop -t /app/share/applications
      - install -Dm644 com.alientrap.nexuiz-classic.png -t /app/share/icons/hicolor/256x256/apps
    sources:
      - type: file
        path: com.alientrap.nexuiz-classic.metainfo.xml
      - type: file
        path: com.alientrap.nexuiz-classic.desktop
      - type: file
        path: com.alientrap.nexuiz-classic.png
